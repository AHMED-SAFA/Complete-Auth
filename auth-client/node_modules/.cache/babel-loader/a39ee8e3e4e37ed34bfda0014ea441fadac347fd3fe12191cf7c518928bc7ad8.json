{"ast":null,"code":"// import { useNavigate } from \"react-router-dom\";\n// import { useAuth } from \"../context/AuthContext\";\n// import { Container, Typography, Button, Box, Avatar } from \"@mui/material\";\n// import { useEffect, useState } from \"react\";\n// import axios from \"axios\";\n\n// const Home = () => {\n//   const { user, token, logout } = useAuth();\n//   const navigate = useNavigate();\n//   const [userData, setUserData] = useState(null);\n\n//   useEffect(() => {\n//     if (!user) {\n//       console.log(\"No user found\");\n//       navigate(\"/login\");\n//     } else {\n//       console.log(\"User found:\", user);\n//       if (!user.username && user.user_id) {\n//         fetchUserData();\n//       } else {\n//         setUserData(user);\n//       }\n//     }\n//   }, [user, navigate]);\n\n//   const fetchUserData = async () => {\n//     try {\n//       const response = await axios.get(\"http://127.0.0.1:8000/api/auth/user/\", {\n//         headers: {\n//           Authorization: `Bearer ${token}`,\n//         },\n//       });\n//       console.log(\"Fetched user data:\", response.data);\n//       setUserData(response.data);\n//     } catch (error) {\n//       console.error(\"Error fetching user data:\", error);\n//     }\n//   };\n\n//   const handleLogout = async () => {\n//     await logout();\n//     navigate(\"/login\");\n//   };\n\n//   // Get the profile image URL from userData or user object\n//   const profileImage = userData?.image || user?.image;\n\n//   return (\n//     <Container maxWidth=\"sm\">\n//       <Box\n//         sx={{\n//           mt: 8,\n//           display: \"flex\",\n//           flexDirection: \"column\",\n//           alignItems: \"center\",\n//         }}\n//       >\n//         {profileImage && (\n//           <Avatar\n//             src={profileImage}\n//             alt={`${userData?.username || user?.username}'s profile`}\n//             sx={{ width: 100, height: 100, mb: 2 }}\n//           />\n//         )}\n//         <Typography variant=\"h4\" component=\"h1\" gutterBottom>\n//           Welcome {userData?.username || user?.username || \"User\"}!\n//         </Typography>\n//         <Typography variant=\"h5\" component=\"h1\" gutterBottom>\n//           Email: {userData?.email || user?.email}\n//         </Typography>\n//         <Typography variant=\"body1\" gutterBottom>\n//           {userData?.is_verified || user?.is_verified\n//             ? \"Your email is verified and you're all set!\"\n//             : \"Please verify your email to access all features.\"}\n//         </Typography>\n//         <Button\n//           variant=\"contained\"\n//           color=\"primary\"\n//           onClick={handleLogout}\n//           sx={{ mt: 2 }}\n//         >\n//           Logout\n//         </Button>\n//       </Box>\n//     </Container>\n//   );\n// };\n\n// export default Home;","map":{"version":3,"names":[],"sources":["C:/Users/ahmed/Desktop/CP/New folder/auth-client/src/pages/Home.js"],"sourcesContent":["// import { useNavigate } from \"react-router-dom\";\r\n// import { useAuth } from \"../context/AuthContext\";\r\n// import { Container, Typography, Button, Box, Avatar } from \"@mui/material\";\r\n// import { useEffect, useState } from \"react\";\r\n// import axios from \"axios\";\r\n\r\n// const Home = () => {\r\n//   const { user, token, logout } = useAuth();\r\n//   const navigate = useNavigate();\r\n//   const [userData, setUserData] = useState(null);\r\n\r\n//   useEffect(() => {\r\n//     if (!user) {\r\n//       console.log(\"No user found\");\r\n//       navigate(\"/login\");\r\n//     } else {\r\n//       console.log(\"User found:\", user);\r\n//       if (!user.username && user.user_id) {\r\n//         fetchUserData();\r\n//       } else {\r\n//         setUserData(user);\r\n//       }\r\n//     }\r\n//   }, [user, navigate]);\r\n\r\n//   const fetchUserData = async () => {\r\n//     try {\r\n//       const response = await axios.get(\"http://127.0.0.1:8000/api/auth/user/\", {\r\n//         headers: {\r\n//           Authorization: `Bearer ${token}`,\r\n//         },\r\n//       });\r\n//       console.log(\"Fetched user data:\", response.data);\r\n//       setUserData(response.data);\r\n//     } catch (error) {\r\n//       console.error(\"Error fetching user data:\", error);\r\n//     }\r\n//   };\r\n\r\n//   const handleLogout = async () => {\r\n//     await logout();\r\n//     navigate(\"/login\");\r\n//   };\r\n\r\n//   // Get the profile image URL from userData or user object\r\n//   const profileImage = userData?.image || user?.image;\r\n\r\n//   return (\r\n//     <Container maxWidth=\"sm\">\r\n//       <Box\r\n//         sx={{\r\n//           mt: 8,\r\n//           display: \"flex\",\r\n//           flexDirection: \"column\",\r\n//           alignItems: \"center\",\r\n//         }}\r\n//       >\r\n//         {profileImage && (\r\n//           <Avatar\r\n//             src={profileImage}\r\n//             alt={`${userData?.username || user?.username}'s profile`}\r\n//             sx={{ width: 100, height: 100, mb: 2 }}\r\n//           />\r\n//         )}\r\n//         <Typography variant=\"h4\" component=\"h1\" gutterBottom>\r\n//           Welcome {userData?.username || user?.username || \"User\"}!\r\n//         </Typography>\r\n//         <Typography variant=\"h5\" component=\"h1\" gutterBottom>\r\n//           Email: {userData?.email || user?.email}\r\n//         </Typography>\r\n//         <Typography variant=\"body1\" gutterBottom>\r\n//           {userData?.is_verified || user?.is_verified\r\n//             ? \"Your email is verified and you're all set!\"\r\n//             : \"Please verify your email to access all features.\"}\r\n//         </Typography>\r\n//         <Button\r\n//           variant=\"contained\"\r\n//           color=\"primary\"\r\n//           onClick={handleLogout}\r\n//           sx={{ mt: 2 }}\r\n//         >\r\n//           Logout\r\n//         </Button>\r\n//       </Box>\r\n//     </Container>\r\n//   );\r\n// };\r\n\r\n// export default Home;\r\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}