{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ahmed\\\\Desktop\\\\CP\\\\New folder\\\\auth-client\\\\src\\\\pages\\\\Home.js\",\n  _s = $RefreshSig$();\n// /* eslint-disable react-hooks/exhaustive-deps */\n// import { useNavigate } from \"react-router-dom\";\n// import { useAuth } from \"../context/AuthContext\";\n// import { Container, Typography, Button, Box } from \"@mui/material\";\n// import { useEffect, useState } from \"react\";\n// import axios from \"axios\";\n\n// const Home = () => {\n//   const { user, token, logout } = useAuth();\n//   const navigate = useNavigate();\n//   const [userData, setUserData] = useState(null);\n\n//   useEffect(() => {\n//     if (!user) {\n//       console.log(\"No user found\");\n//       navigate(\"/login\");\n//     } else {\n//       console.log(\"User found:\", user);\n//       if (!user.username && user.user_id) {\n//         fetchUserData();\n//       } else {\n//         setUserData(user);\n//       }\n//     }\n//   }, [user, navigate]);\n\n//   const fetchUserData = async () => {\n//     try {\n//       const response = await axios.get(\"http://127.0.0.1:8000/api/auth/user/\", {\n//         headers: {\n//           Authorization: `Bearer ${token}`,\n//         },\n//       });\n//       console.log(\"Fetched user data:\", response.data);\n//       setUserData(response.data);\n//     } catch (error) {\n//       console.error(\"Error fetching user data:\", error);\n//     }\n//   };\n\n//   const handleLogout = async () => {\n//     await logout();\n//     navigate(\"/login\");\n//   };\n\n//   return (\n//     <Container maxWidth=\"sm\">\n//       <Box\n//         sx={{\n//           mt: 8,\n//           display: \"flex\",\n//           flexDirection: \"column\",\n//           alignItems: \"center\",\n//           textAlign: \"center\",\n//         }}\n//       >\n//         <Typography component=\"h1\" variant=\"h4\" gutterBottom>\n//           Welcome {userData?.username || user?.username || \"User\"}!\n//         </Typography>\n\n//         <Typography variant=\"body1\" gutterBottom sx={{ mb: 3 }}>\n//           {userData?.is_verified || user?.is_verified\n//             ? \"Your email is verified and you're all set!\"\n//             : \"Please verify your email to access all features.\"}\n//         </Typography>\n\n//         <Button\n//           variant=\"contained\"\n//           color=\"secondary\"\n//           onClick={handleLogout}\n//           sx={{ mt: 2 }}\n//         >\n//           Logout\n//         </Button>\n//       </Box>\n//     </Container>\n//   );\n// };\n\n// export default Home;\n\nimport { useNavigate } from \"react-router-dom\";\nimport { useAuth } from \"../context/AuthContext\";\nimport { Container, Typography, Button, Box, Avatar } from \"@mui/material\";\nimport { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Home = () => {\n  _s();\n  const {\n    user,\n    token,\n    logout\n  } = useAuth();\n  const navigate = useNavigate();\n  const [userData, setUserData] = useState(null);\n  useEffect(() => {\n    if (!user) {\n      console.log(\"No user found\");\n      navigate(\"/login\");\n    } else {\n      console.log(\"User found:\", user);\n      if (!user.username && user.user_id) {\n        fetchUserData();\n      } else {\n        setUserData(user);\n      }\n    }\n  }, [user, navigate]);\n  const fetchUserData = async () => {\n    try {\n      const response = await axios.get(\"http://127.0.0.1:8000/api/auth/user/\", {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      console.log(\"Fetched user data:\", response.data);\n      setUserData(response.data);\n    } catch (error) {\n      console.error(\"Error fetching user data:\", error);\n    }\n  };\n  const handleLogout = async () => {\n    await logout();\n    navigate(\"/login\");\n  };\n\n  // Get the profile image URL from userData or user object\n  const profileImage = (userData === null || userData === void 0 ? void 0 : userData.image) || (user === null || user === void 0 ? void 0 : user.image);\n  return /*#__PURE__*/_jsxDEV(Container, {\n    maxWidth: \"sm\",\n    children: /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        mt: 8,\n        display: \"flex\",\n        flexDirection: \"column\",\n        alignItems: \"center\"\n      },\n      children: [profileImage && /*#__PURE__*/_jsxDEV(Avatar, {\n        src: profileImage,\n        alt: `${(userData === null || userData === void 0 ? void 0 : userData.username) || (user === null || user === void 0 ? void 0 : user.username)}'s profile`,\n        sx: {\n          width: 100,\n          height: 100,\n          mb: 2\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"h4\",\n        component: \"h1\",\n        gutterBottom: true,\n        children: [\"Welcome \", (userData === null || userData === void 0 ? void 0 : userData.username) || (user === null || user === void 0 ? void 0 : user.username) || \"User\", \"!\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"h6\",\n        component: \"h1\",\n        gutterBottom: true,\n        children: [\"Email: \", (userData === null || userData === void 0 ? void 0 : userData.email) || (user === null || user === void 0 ? void 0 : user.email)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"body1\",\n        gutterBottom: true,\n        children: userData !== null && userData !== void 0 && userData.is_verified || user !== null && user !== void 0 && user.is_verified ? \"Your email is verified and you're all set!\" : \"Please verify your email to access all features.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"contained\",\n        color: \"primary\",\n        onClick: handleLogout,\n        sx: {\n          mt: 2\n        },\n        children: \"Logout\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 130,\n    columnNumber: 5\n  }, this);\n};\n_s(Home, \"5g8yqWKe/IB5WIP+Jetp3df3pNk=\", false, function () {\n  return [useAuth, useNavigate];\n});\n_c = Home;\nexport default Home;\nvar _c;\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"names":["useNavigate","useAuth","Container","Typography","Button","Box","Avatar","useEffect","useState","axios","jsxDEV","_jsxDEV","Home","_s","user","token","logout","navigate","userData","setUserData","console","log","username","user_id","fetchUserData","response","get","headers","Authorization","data","error","handleLogout","profileImage","image","maxWidth","children","sx","mt","display","flexDirection","alignItems","src","alt","width","height","mb","fileName","_jsxFileName","lineNumber","columnNumber","variant","component","gutterBottom","email","is_verified","color","onClick","_c","$RefreshReg$"],"sources":["C:/Users/ahmed/Desktop/CP/New folder/auth-client/src/pages/Home.js"],"sourcesContent":["// /* eslint-disable react-hooks/exhaustive-deps */\r\n// import { useNavigate } from \"react-router-dom\";\r\n// import { useAuth } from \"../context/AuthContext\";\r\n// import { Container, Typography, Button, Box } from \"@mui/material\";\r\n// import { useEffect, useState } from \"react\";\r\n// import axios from \"axios\";\r\n\r\n// const Home = () => {\r\n//   const { user, token, logout } = useAuth();\r\n//   const navigate = useNavigate();\r\n//   const [userData, setUserData] = useState(null);\r\n\r\n//   useEffect(() => {\r\n//     if (!user) {\r\n//       console.log(\"No user found\");\r\n//       navigate(\"/login\");\r\n//     } else {\r\n//       console.log(\"User found:\", user);\r\n//       if (!user.username && user.user_id) {\r\n//         fetchUserData();\r\n//       } else {\r\n//         setUserData(user);\r\n//       }\r\n//     }\r\n//   }, [user, navigate]);\r\n\r\n//   const fetchUserData = async () => {\r\n//     try {\r\n//       const response = await axios.get(\"http://127.0.0.1:8000/api/auth/user/\", {\r\n//         headers: {\r\n//           Authorization: `Bearer ${token}`,\r\n//         },\r\n//       });\r\n//       console.log(\"Fetched user data:\", response.data);\r\n//       setUserData(response.data);\r\n//     } catch (error) {\r\n//       console.error(\"Error fetching user data:\", error);\r\n//     }\r\n//   };\r\n\r\n//   const handleLogout = async () => {\r\n//     await logout();\r\n//     navigate(\"/login\");\r\n//   };\r\n\r\n//   return (\r\n//     <Container maxWidth=\"sm\">\r\n//       <Box\r\n//         sx={{\r\n//           mt: 8,\r\n//           display: \"flex\",\r\n//           flexDirection: \"column\",\r\n//           alignItems: \"center\",\r\n//           textAlign: \"center\",\r\n//         }}\r\n//       >\r\n//         <Typography component=\"h1\" variant=\"h4\" gutterBottom>\r\n//           Welcome {userData?.username || user?.username || \"User\"}!\r\n//         </Typography>\r\n\r\n//         <Typography variant=\"body1\" gutterBottom sx={{ mb: 3 }}>\r\n//           {userData?.is_verified || user?.is_verified\r\n//             ? \"Your email is verified and you're all set!\"\r\n//             : \"Please verify your email to access all features.\"}\r\n//         </Typography>\r\n\r\n//         <Button\r\n//           variant=\"contained\"\r\n//           color=\"secondary\"\r\n//           onClick={handleLogout}\r\n//           sx={{ mt: 2 }}\r\n//         >\r\n//           Logout\r\n//         </Button>\r\n//       </Box>\r\n//     </Container>\r\n//   );\r\n// };\r\n\r\n// export default Home;\r\n\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { useAuth } from \"../context/AuthContext\";\r\nimport { Container, Typography, Button, Box, Avatar } from \"@mui/material\";\r\nimport { useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\n\r\nconst Home = () => {\r\n  const { user, token, logout } = useAuth();\r\n  const navigate = useNavigate();\r\n  const [userData, setUserData] = useState(null);\r\n\r\n  useEffect(() => {\r\n    if (!user) {\r\n      console.log(\"No user found\");\r\n      navigate(\"/login\");\r\n    } else {\r\n      console.log(\"User found:\", user);\r\n      if (!user.username && user.user_id) {\r\n        fetchUserData();\r\n      } else {\r\n        setUserData(user);\r\n      }\r\n    }\r\n  }, [user, navigate]);\r\n\r\n  const fetchUserData = async () => {\r\n    try {\r\n      const response = await axios.get(\"http://127.0.0.1:8000/api/auth/user/\", {\r\n        headers: {\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n      });\r\n      console.log(\"Fetched user data:\", response.data);\r\n      setUserData(response.data);\r\n    } catch (error) {\r\n      console.error(\"Error fetching user data:\", error);\r\n    }\r\n  };\r\n\r\n  const handleLogout = async () => {\r\n    await logout();\r\n    navigate(\"/login\");\r\n  };\r\n\r\n  // Get the profile image URL from userData or user object\r\n  const profileImage = userData?.image || user?.image;\r\n\r\n  return (\r\n    <Container maxWidth=\"sm\">\r\n      <Box\r\n        sx={{\r\n          mt: 8,\r\n          display: \"flex\",\r\n          flexDirection: \"column\",\r\n          alignItems: \"center\",\r\n        }}\r\n      >\r\n        {profileImage && (\r\n          <Avatar\r\n            src={profileImage}\r\n            alt={`${userData?.username || user?.username}'s profile`}\r\n            sx={{ width: 100, height: 100, mb: 2 }}\r\n          />\r\n        )}\r\n        <Typography variant=\"h4\" component=\"h1\" gutterBottom>\r\n          Welcome {userData?.username || user?.username || \"User\"}!\r\n        </Typography>\r\n        <Typography variant=\"h6\" component=\"h1\" gutterBottom>\r\n          Email: {userData?.email || user?.email}\r\n        </Typography>\r\n        <Typography variant=\"body1\" gutterBottom>\r\n          {userData?.is_verified || user?.is_verified\r\n            ? \"Your email is verified and you're all set!\"\r\n            : \"Please verify your email to access all features.\"}\r\n        </Typography>\r\n        <Button\r\n          variant=\"contained\"\r\n          color=\"primary\"\r\n          onClick={handleLogout}\r\n          sx={{ mt: 2 }}\r\n        >\r\n          Logout\r\n        </Button>\r\n      </Box>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default Home;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}