{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ahmed\\\\Desktop\\\\CP\\\\djr_auth_deep\\\\auth-client\\\\src\\\\pages\\\\Home.js\",\n  _s = $RefreshSig$();\n// // import { useNavigate } from \"react-router-dom\";\n// // import { useAuth } from \"../context/AuthContext\";\n// // import { Container, Typography, Button, Box } from \"@mui/material\";\n// // import { useEffect } from \"react\";\n\n// // const Home = () => {\n// //   const { user, logout } = useAuth();\n// //   const navigate = useNavigate();\n\n// //   useEffect(() => {\n// //     if (!user) {\n// //       console.log(\"No user found\");\n// //       navigate(\"/login\");\n// //     }\n// //     else{\n// //       console.log(\"User found:\", user);\n// //     }\n// //   }, [user, navigate]);\n\n// //   const handleLogout = () => {\n// //     const response = logout();\n// //     if (response.error) {\n// //       console.log(\"Logout error:\", response.error);\n// //       return;\n// //     } else {\n// //       console.log(\"Logout successful\");\n// //       navigate(\"/login\");\n// //     }\n// //   };\n\n// //   return (\n// //     <Container maxWidth=\"md\">\n// //       <Box sx={{ mt: 4 }}>\n// //         <Typography variant=\"h4\" component=\"h1\" gutterBottom>\n// //           Welcome {user?.username}!\n// //         </Typography>\n// //         <Typography variant=\"body1\" gutterBottom>\n// //           {user?.is_verified\n// //             ? \"Your email is verified and you're all set!\"\n// //             : \"Please verify your email to access all features.\"}\n// //         </Typography>\n// //         <Button\n// //           variant=\"contained\"\n// //           color=\"primary\"\n// //           onClick={handleLogout}\n// //           sx={{ mt: 3 }}\n// //         >\n// //           Logout\n// //         </Button>\n// //       </Box>\n// //     </Container>\n// //   );\n// // };\n\n// export default Home;\n\nimport { useNavigate } from \"react-router-dom\";\nimport { useAuth } from \"../context/AuthContext\";\nimport { Container, Typography, Button, Box } from \"@mui/material\";\nimport { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Home = () => {\n  _s();\n  const {\n    user,\n    token,\n    logout\n  } = useAuth();\n  const navigate = useNavigate();\n  const [userData, setUserData] = useState(null);\n  useEffect(() => {\n    if (!user) {\n      console.log(\"No user found\");\n      navigate(\"/login\");\n    } else {\n      console.log(\"User found:\", user);\n\n      // If user data is coming from Google login, we need to fetch the user details\n      if (!user.username && user.user_id) {\n        fetchUserData();\n      } else {\n        setUserData(user);\n      }\n    }\n  }, [user, navigate]);\n  const fetchUserData = async () => {\n    try {\n      const response = await axios.get(\"http://127.0.0.1:8000/api/auth/user/\", {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      console.log(\"Fetched user data:\", response.data);\n      setUserData(response.data);\n    } catch (error) {\n      console.error(\"Error fetching user data:\", error);\n    }\n  };\n  const handleLogout = async () => {\n    await logout();\n    navigate(\"/login\");\n  };\n  return /*#__PURE__*/_jsxDEV(Container, {\n    maxWidth: \"sm\",\n    children: /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        mt: 8,\n        display: \"flex\",\n        flexDirection: \"column\",\n        alignItems: \"center\",\n        textAlign: \"center\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(Typography, {\n        component: \"h1\",\n        variant: \"h4\",\n        gutterBottom: true,\n        children: [\"Welcome \", (userData === null || userData === void 0 ? void 0 : userData.username) || (user === null || user === void 0 ? void 0 : user.username) || \"User\", \"!\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"body1\",\n        gutterBottom: true,\n        sx: {\n          mb: 3\n        },\n        children: userData !== null && userData !== void 0 && userData.is_verified || user !== null && user !== void 0 && user.is_verified ? \"Your email is verified and you're all set!\" : \"Please verify your email to access all features.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"body1\",\n        gutterBottom: true,\n        sx: {\n          mb: 3\n        },\n        children: [(userData === null || userData === void 0 ? void 0 : userData.email) || (user === null || user === void 0 ? void 0 : user.email), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"contained\",\n        color: \"secondary\",\n        onClick: handleLogout,\n        sx: {\n          mt: 2\n        },\n        children: \"Logout\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 110,\n    columnNumber: 5\n  }, this);\n};\n_s(Home, \"5g8yqWKe/IB5WIP+Jetp3df3pNk=\", false, function () {\n  return [useAuth, useNavigate];\n});\n_c = Home;\nexport default Home;\nvar _c;\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"names":["useNavigate","useAuth","Container","Typography","Button","Box","useEffect","useState","axios","jsxDEV","_jsxDEV","Home","_s","user","token","logout","navigate","userData","setUserData","console","log","username","user_id","fetchUserData","response","get","headers","Authorization","data","error","handleLogout","maxWidth","children","sx","mt","display","flexDirection","alignItems","textAlign","component","variant","gutterBottom","fileName","_jsxFileName","lineNumber","columnNumber","mb","is_verified","email","color","onClick","_c","$RefreshReg$"],"sources":["C:/Users/ahmed/Desktop/CP/djr_auth_deep/auth-client/src/pages/Home.js"],"sourcesContent":["// // import { useNavigate } from \"react-router-dom\";\r\n// // import { useAuth } from \"../context/AuthContext\";\r\n// // import { Container, Typography, Button, Box } from \"@mui/material\";\r\n// // import { useEffect } from \"react\";\r\n\r\n// // const Home = () => {\r\n// //   const { user, logout } = useAuth();\r\n// //   const navigate = useNavigate();\r\n\r\n// //   useEffect(() => {\r\n// //     if (!user) {\r\n// //       console.log(\"No user found\");\r\n// //       navigate(\"/login\");\r\n// //     }\r\n// //     else{\r\n// //       console.log(\"User found:\", user);\r\n// //     }\r\n// //   }, [user, navigate]);\r\n\r\n// //   const handleLogout = () => {\r\n// //     const response = logout();\r\n// //     if (response.error) {\r\n// //       console.log(\"Logout error:\", response.error);\r\n// //       return;\r\n// //     } else {\r\n// //       console.log(\"Logout successful\");\r\n// //       navigate(\"/login\");\r\n// //     }\r\n// //   };\r\n\r\n// //   return (\r\n// //     <Container maxWidth=\"md\">\r\n// //       <Box sx={{ mt: 4 }}>\r\n// //         <Typography variant=\"h4\" component=\"h1\" gutterBottom>\r\n// //           Welcome {user?.username}!\r\n// //         </Typography>\r\n// //         <Typography variant=\"body1\" gutterBottom>\r\n// //           {user?.is_verified\r\n// //             ? \"Your email is verified and you're all set!\"\r\n// //             : \"Please verify your email to access all features.\"}\r\n// //         </Typography>\r\n// //         <Button\r\n// //           variant=\"contained\"\r\n// //           color=\"primary\"\r\n// //           onClick={handleLogout}\r\n// //           sx={{ mt: 3 }}\r\n// //         >\r\n// //           Logout\r\n// //         </Button>\r\n// //       </Box>\r\n// //     </Container>\r\n// //   );\r\n// // };\r\n\r\n// export default Home;\r\n\r\n\r\n\r\n\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { useAuth } from \"../context/AuthContext\";\r\nimport { Container, Typography, Button, Box } from \"@mui/material\";\r\nimport { useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\n\r\nconst Home = () => {\r\n  const { user, token, logout } = useAuth();\r\n  const navigate = useNavigate();\r\n  const [userData, setUserData] = useState(null);\r\n\r\n  useEffect(() => {\r\n    if (!user) {\r\n      console.log(\"No user found\");\r\n      navigate(\"/login\");\r\n    } else {\r\n      console.log(\"User found:\", user);\r\n      \r\n      // If user data is coming from Google login, we need to fetch the user details\r\n      if (!user.username && user.user_id) {\r\n        fetchUserData();\r\n      } else {\r\n        setUserData(user);\r\n      }\r\n    }\r\n  }, [user, navigate]);\r\n\r\n  const fetchUserData = async () => {\r\n    try {\r\n      const response = await axios.get(\r\n        \"http://127.0.0.1:8000/api/auth/user/\",\r\n        {\r\n          headers: {\r\n            Authorization: `Bearer ${token}`,\r\n          },\r\n        }\r\n      );\r\n      console.log(\"Fetched user data:\", response.data);\r\n      setUserData(response.data);\r\n    } catch (error) {\r\n      console.error(\"Error fetching user data:\", error);\r\n    }\r\n  };\r\n\r\n  const handleLogout = async () => {\r\n    await logout();\r\n    navigate(\"/login\");\r\n  };\r\n\r\n  return (\r\n    <Container maxWidth=\"sm\">\r\n      <Box\r\n        sx={{\r\n          mt: 8,\r\n          display: \"flex\",\r\n          flexDirection: \"column\",\r\n          alignItems: \"center\",\r\n          textAlign: \"center\",\r\n        }}\r\n      >\r\n        <Typography component=\"h1\" variant=\"h4\" gutterBottom>\r\n          Welcome {userData?.username || user?.username || \"User\"}!\r\n        </Typography>\r\n        \r\n        <Typography variant=\"body1\" gutterBottom sx={{ mb: 3 }}>\r\n          {userData?.is_verified || user?.is_verified\r\n            ? \"Your email is verified and you're all set!\"\r\n            : \"Please verify your email to access all features.\"}\r\n        </Typography>\r\n\r\n        <Typography variant=\"body1\" gutterBottom sx={{ mb: 3 }}>\r\n          {userData?.email || user?.email}\r\n          <br />\r\n          \r\n\r\n\r\n        \r\n        </Typography>\r\n        <Button\r\n          variant=\"contained\"\r\n          color=\"secondary\"\r\n          onClick={handleLogout}\r\n          sx={{ mt: 2 }}\r\n        >\r\n          Logout\r\n        </Button>\r\n      </Box>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default Home;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}